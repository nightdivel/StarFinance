# Карта сайта

## Авторизация
- **Страница входа**
  - Форма локального входа
  - Кнопка «Войти через Discord»
  - Публичные ресурсы (для страницы входа):
    - GET `/health`
    - GET `/public/auth/background` (+ файл `/public/auth/background/file/:name`)
    - GET `/public/discord-enabled`
- **OAuth Discord**
  - GET `/auth/discord` → редирект на Discord
  - GET `/auth/discord/callback` → редирект на фронт с `?token=...`
  - GET `/auth/profile` — профиль текущего пользователя по токену

## Главное приложение (после входа)
- **Боковое меню (внутри SPA, без отдельных URL-маршрутов)**
  - **Финансы** (`key: finance`)
    - Панель показателей
    - Таблица транзакций
  - **Склад** (`key: warehouse`)
    - Список складских позиций
    - Операции с позициями
  - **Витрина** (`key: showcase`)
    - Публикации на витрину
    - Покупки/заявки из витрины
  - **Заявки** (`key: requests`, доступно при праве `users:write`/админ)
    - Список заявок на покупки
    - Подтверждение/отмена заявок
  - **Пользователи** (`key: users`)
    - Управление пользователями
    - Типы аккаунтов и права
  - **Справочники** (`key: directories`)
    - Валюты, типы товаров и другие справочники
  - **Настройки** (`key: settings`)
    - Системные параметры, Discord OAuth, тема и др.
- **Меню пользователя (шапка)**
  - **Профиль** (`key: profile`): данные пользователя, аватар (Discord), предпочтения темы
  - **Корзина** (`key: cart`): текущие заявки/покупки пользователя
  - **Выход**

## Основные API, используемые фронтендом
- **Аутентификация**
  - POST `/auth/login` — локальный вход
  - GET `/auth/profile` — профиль по токену
- **Пользовательские настройки**
  - GET `/api/user/theme`, PUT `/api/user/theme` — тема пользователя
  - GET `/api/user/layouts/:page`, PUT `/api/user/layouts/:page` — сохранение раскладок
- **Доменные разделы (выборочно)**
  - Заявки/покупки: `/api/requests`, `/api/my/requests`, подтверждение/отмена
  - Пользователи: CRUD, смена пароля админом
  - Типы аккаунтов и права: `/api/account-types`, `/api/account-types/:name`, и т.д.
  - Справочники, витрина, склад, транзакции — соответствующие REST-эндпойнты

## Роутинг
- На клиенте используется `BrowserRouter`, но навигация по разделам реализована состоянием `selectedKey` в `MainLayout` (без отдельных URL-путей для разделов).
- При необходимости можно ввести явные маршруты (например, `/finance`, `/warehouse`, …) и синхронизировать их с `selectedKey`.

## Доступ
- Видимость разделов определяется правами пользователя (`permissions`) и типом аккаунта.
- Раздел «Заявки» отображается только при правах `users:write` (обычно администратор).
